# Teplai

# Руководство по развертыванию

Для корректной работы сервисов на NodeJS необходимо перед запуском контейнеров вызвать npm i

Для запуска всего сервиса целиком достаточно выподнить команду docker compose up для запуска docker-compose.yaml в корневой директории при условии, что все переменные окружения заданы
Необходимые переменные окружения описаны в файле example.env. Необходимо создать файл .env в указанной директории с указанными значениями

Для запуска сервиса рекомендуется иметь домен и валидный SSL-сертификат, например сертификат Letsencrypt.
Наиболее простой способ запустить все в таком случае - поменять все вхождения adera-team.ru в переменных окружения и конфигах Docker-compose на свой домен, предоставив контейнеру NGINX пути к сертификату.

Иначе - отключить контейнер NGINX (закомментировать или удалить в compose) и изменить переменные окружения для взаимодействия по названию контейнера, например:

MINIO_ENDPOINT='minioapi.adera-team.ru' заменить на путь к контейнеру с разрешением порта, на который бы переводил NGINX.

MINIO_ENDPOINT='http://minio:9001' - где minio - название сервиса в Docker compose, а 9001 - порт, на который перенаправляет запрос NGINX

Для нормальной работы анализа ML необходимо перед каждым запуском удалять файл хэша /apps/HaCS_ml_back/data_buildings_unom_ids_pairs.json

Для входа в сервис необходимо вручную создать пользователя для входа, запросы для этого представлены в сваггере NESTJs 'http://localhost:8000/api', 

POST http://localhost:8000/user {username: string. password: string}